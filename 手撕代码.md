## 线程池
**线程池有三个类**
1.任务类
2.任务队列
3.线程池
**主要组成部分是三个**
1.任务队列：存储需要分配的任务，用队列实现
2.工作线程：不停地读取任务队列，读取里面的任务并处理
如果队列为空，工作线程将会被阻塞，条件变量
如果队列不为空，唤醒线程，工作
3.管理线程
周期性地对任务队列中的任务数量以及处于忙碌状态的工作县城个数进行检测，当任务过多就适当创建一些新线程，当任务过少就销毁一些线程
```
#include<pthread.h>
#include<queue>
#include<iostream>
#include<string.h>
#include<exception>
#include<unistd.h>

const int NUMBER = 2;

using callback = void(*)(void* arg);

class Task
{
public:
    callback fun;
    void* arg;
public:
    Task()
    {
        fun = nullptr;
        arg = nullptr;
    }

    Task(callback f, void* arg)
    {
        fun = f;
        this->arg = arg;
    }
};

class Task_queue
{
private:
    pthread_mutex_t m_mutex;
    std::queue<Task> m_mutex;

public:
    Task_queue();
    ~Task_queue();

    //添加任务
    void add_task(Task& task);
    void add_task(callback f, void* arg);

    //取出任务
    Task& get_task();

    int task_size()
    {
        return m_queue.size();
    }
};

class Thread_pool
{
private:
    pthread_mutex_t m_mutex_pool;
    
}
```